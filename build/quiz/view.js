import*as e from"@wordpress/interactivity";var t={d:(e,r)=>{for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const r=(l={store:()=>e.store},i={},t.d(i,l),i),o=".gtb-quiz__answer-input",s={answered:0,correct:0,allCorrect:!1,modal_title:"Quiz Results"},c=()=>{document.querySelectorAll(o).forEach((e=>e.checked=!1))},a=()=>document.querySelector(".gtb-quiz__status-dialog"),{state:n}=(0,r.store)("gutenblocks/quiz",{actions:{resetQuiz:()=>{Object.assign(n,s),c();const e=a();e?.open&&e.close()},async checkAnswers(){try{const e=await fetch(`${n.site_url}/wp-json/gutenblocks/v1/quizzes/${n.quiz_id}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Failed to fetch quiz data");const t=await e.json(),{questions:r,correct_answers:s}=t;n.answered=0,n.correct=0,n.modal_title=n.modal_title;const c=(()=>{const e=document.querySelectorAll(o+":checked");return Array.from(e).map((e=>({questionIndex:parseInt(e.name.split("_")[1],10),answer:e.value})))})();n.answered=c.length,n.correct=c.reduce(((e,{questionIndex:t,answer:r})=>e+(r===s[t]?1:0)),0),n.allCorrect=n.answered===r.length&&n.correct===r.length,n.modal_title=n.allCorrect?n.all_correct_title:n.modal_title,a()?.showModal()}catch(e){throw new Error("Failed to check answers")}},modalClose:()=>{Object.assign(n,s),c(),a()?.close()}}});var l,i;